___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Surfside Digital Tracking",
  "categories": ["MARKETING", "ADVERTISING", "ANALYTICS", "ATTRIBUTION", "CONVERSIONS"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/jpeg;base64,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4zv8bAzaOrfPOE7ADFaA5lsjZ8jc4lY2Gg092jjINgBgF9CJljgZbOrcy8qQuQ1UOleUH7fKttqq3tznWNxmexblVEWUtu9Zv2n+6eY85NwtGAfy+xrUTcGPb+LIv5bS12x1JSyVtXjCmkmUYBUFH87sLff0ClscYAFAErlR4r4ePnu6ehtuuDbAREnGqVKlSpUE2yH2CJ/Tau4vqu4vqu4vqu4vqu4vqppqfFiEW7+iPBfLx8t3SlUqyufE8d8l+h6GSj+d2FnvSU0syjFeNIykun+r/PQRZSZ1v4s2loyD+D2NONlI4cUYCo37JDdXNN/EWUFs9ZrI9i2IuLVP2DmdsU9r9dK8oP2peVZXMarghWHE8lyKHaKb5dXG+eMh2AGK1gVjYajT2LgmhNm5Z8BUVK6ni/yv87AyaOrxi5uh/rMBzoWMLcJ35H9ohe9EC/E4ln6gKMTXl6PL0eXo8vR5eg46kN0qIU/8qsdKsaQBByP9h//aAAwDAQACAAMAAAAQ888888888888888888888888888888wUM88o888888g88884c88888888880c888888oc880c88888888888088888888888U888U8888884c88848888884c8848c888888s888s88888888888888888888888888888888//EABQRAQAAAAAAAAAAAAAAAAAAAHD/2gAIAQMBAT8QKf/EABQRAQAAAAAAAAAAAAAAAAAAAHD/2gAIAQIBAT8QKf/EACUQAQABAwMEAwEBAQAAAAAAAAERITFBADBRIEBhcYGRoWCx8f/aAAgBAQABPxD+uBFQC66nVULi8Ig+zRZ8Yj76m9Zs2bNmzcPyaGWySCoLMRIbywS0NTgrPFjATIzO4XRXwMAfBE/PsFXcTKrTdhgwcDIAAEBjdPvQs9KGgALOqMzh7ZldeCAvAxpZZauwJCSeUNZT6VhAq0AR4AVACgAW3Vg085CgmVKXc9VLBsm0SejFhYUDFVoaBcRNAyuUyq1VV3o/3iyPQ4YQvM8aVSrK3XYwylWKkswSAZUM6ETHATgmZg+AAoG/Q0vDMtA9nqTYAPu0nKWAqqgGq8+hCFY4kT2LVd96kv0VaMdQolXL1sigukgBdV0bSwIBKjcFJFxwHYT6jHkqH11nLIgBKuudRRGuME14Uor2MCV8ka4XKpnHXt27du3bFqLIyWkHPVeA5PUPHjx48gghJBSBEOfZc6iiNY4JpwrRTTlkSplXqeqa/gdPzsZ2FhUCUS4KwbjgdMiguklDdV64+4qLwpPZ+wUzlGEK7xIPoCqaQPu0nAWAoCgHWAVuZBA9qGj+RZ+k/PH53xEzwE4YmYPgFaDrLKVYqw3BKrlVzsJbnlQhqeQ/9DfRcRNAwGUwAVVA07TJ6M2FhFcUChsIFZKUmr5iTI+BS6ba5i6ZSU5Vd4BHgBUoaABfSlJKKhpD+qwq1adYszjcebHg9jBXT2rEmPCIJWLFAoBvLBLbSruJlV4uwS4OAnqZmQhfO1HyjTLdBV5xRXzpQjXpB4H+535fk0MtkkFFCYmE6jZs2bNxZO6r9D+6SFMjH72o9owFeAAP7D//2Q\u003d\u003d"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "accountId",
    "displayName": "Account ID",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "sourceId",
    "displayName": "Source ID",
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "platform",
    "displayName": "Platform",
    "selectItems": [
      {
        "value": "digital",
        "displayValue": "Digital"
      },
      {
        "value": "dutchie",
        "displayValue": "Dutchie"
      },
      {
        "value": "iheartjane",
        "displayValue": "I Heart Jane"
      },
      {
        "value": "tymber",
        "displayValue": "Tymber"
      },
      {
        "value": "meadow",
        "displayValue": "Meadow"
      }
    ],
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const injectScript = require('injectScript');
const log = require('logToConsole');
const JSON = require('JSON');
const localStorage = require('localStorage');


//Callback to note if script load succeeded
const onSuccess = () => {
  log('Script LOADED');
  data.gtmOnSuccess();
};

// Callback to note if script load failed
const onFail = () => {
  log('Script load FAILED.');
  data.gtmOnFailure();
};


// Access the generic settings
const accountId = data.accountId || 0;
const sourceId = data.sourceId || 0;
const platform = data.platform || 'digital';


var surfContext = { 
  "accountId": accountId, 
  "sourceId": sourceId,
  "platform": platform,
  };

localStorage.setItem('surfside', JSON.stringify(surfContext));

//Inject Scripts
const waveUrl = 'https://cdn.surfside.io.s3.amazonaws.com/_testing/gtmTemplate/wave.js';
injectScript(waveUrl, data.gtmOnSuccess, data.gtmOnFailure, waveUrl);

const syncUrl = 'https://edge.surfside.io/id/uid?';
injectScript(syncUrl, data.gtmOnSuccess, data.gtmOnFailure, syncUrl);


// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://edge.surfside.io/id/uid?"
              },
              {
                "type": 1,
                "string": "https://cdn.surfside.io.s3.amazonaws.com/_testing/gtmTemplate/wave.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "surfside"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2/15/2022, 1:16:17 PM


